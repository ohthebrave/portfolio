import{Signal as e,signal as n,computed as t,effect as r}from"@preact/signals-core";import o,{__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED as i,useRef as u,useMemo as f,useEffect as c}from"react";import{useSyncExternalStore as s}from"use-sync-external-store/shim/index.js";import l from"react/jsx-runtime";import a from"react/jsx-dev-runtime";let m=!1,p=null,b=!1,d=null;const y=new Map;function g(e){if(!e)return 1;const n=y.get(e);if(void 0!==n)return n;let t;const r=e.useCallback.toString();if(e.useReducer===e.useEffect)t=1;else if(e.useEffect===e.useImperativeHandle)t=32;else if(/Invalid/.test(r))t=2;else if(/updateCallback/.test(r)||/\[0\]/.test(r)&&/\[1\]/.test(r)){let n=e.useReducer.toString();if(/rerenderReducer/.test(n)||/return\s*\[\w+,/.test(n))t=16;else t=8}else t=4;y.set(e,t);return t}function v(){!function(){m=!0;Object.defineProperty(i.ReactCurrentDispatcher,"current",{get:()=>d,set(e){if(b){d=e;return}const n=g(d),t=g(e);d=e;if(function(e,n){if(1&e&&28&n)return!0;else if(2&e||2&n)return!1;else if(16&n)return!0;else return!1}(n,t)){b=!0;p=C();b=!1}else if(function(e,n){return Boolean(28&e&&1&n)}(n,t)){var r;null==(r=p)||r.f();p=null}}})}();!function(){const e=l,n=a;o.createElement=x(o.createElement);n.jsx&&(n.jsx=x(n.jsx));e.jsx&&(e.jsx=x(e.jsx));n.jsxs&&(n.jsxs=x(n.jsxs));e.jsxs&&(e.jsxs=x(e.jsxs));n.jsxDEV&&(n.jsxDEV=x(n.jsxDEV));e.jsxDEV&&(e.jsxDEV=x(e.jsxDEV))}()}const h=[],S=Symbol.for("react.element"),j=()=>{};function x(n){if("function"!=typeof n)return n;else return function(t,r,...o){if("string"==typeof t&&r)for(let n in r){let t=r[n];if("children"!==n&&t instanceof e)r[n]=t.value}return n.call(n,t,r,...o)}}const _=Symbol.dispose||Symbol.for("Symbol.dispose");let k;function w(e){if(k)k();k=e&&e.effect.S()}const O=()=>w(),P={effect:{s:void 0,c(){},S:()=>j,d(){}},subscribe:()=>j,getSnapshot:()=>0,f(){},[_](){}};let $;const B=Promise.prototype.then.bind(Promise.resolve());function C(){O();if(!$)$=B(()=>{$=void 0;O()});const e=u();if(null==e.current)e.current=function(){let e,n,t=0,o=r(function(){e=this});e.c=function(){t=t+1|0;if(n)n()};return{effect:e,subscribe(e){n=e;return function(){t=t+1|0;n=void 0;o()}},getSnapshot:()=>t,f(){O()},[_](){O()}}}();const n=e.current;s(n.subscribe,n.getSnapshot,n.getSnapshot);w(n);return n}Object.defineProperties(e.prototype,{$$typeof:{configurable:!0,value:S},type:{configurable:!0,value:function({data:e}){const n=I();try{return e.value}finally{n.f()}}},props:{configurable:!0,get(){return{data:this}}},ref:{configurable:!0,value:null}});function I(){if(m)return P;else return C()}function useSignal(e){return f(()=>n(e),h)}function useComputed(e){const n=u(e);n.current=e;return f(()=>t(()=>n.current()),h)}function useSignalEffect(e){const n=u(e);n.current=e;c(()=>r(()=>n.current()),h)}export{C as _useSignalsImplementation,v as installAutoSignalTracking,useComputed,useSignal,useSignalEffect,I as useSignals,x as wrapJsx};//# sourceMappingURL=runtime.mjs.map
