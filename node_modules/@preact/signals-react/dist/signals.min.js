!function(n,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@preact/signals-core"),require("react"),require("use-sync-external-store/shim/index.js"),require("react/jsx-runtime"),require("react/jsx-dev-runtime")):"function"==typeof define&&define.amd?define(["exports","@preact/signals-core","react","use-sync-external-store/shim/index.js","react/jsx-runtime","react/jsx-dev-runtime"],e):e((n||self).reactSignals={},n.preactSignalsCore,n.react,n.index_js,n.jsxRuntime,n.jsxRuntimeDev)}(this,function(n,e,r,t,i,u){function f(n){return n&&"object"==typeof n&&"default"in n?n.default:n}var o=/*#__PURE__*/f(r),c=/*#__PURE__*/f(i),s=/*#__PURE__*/f(u),a=!1,l=null,v=!1,d=null,p=new Map;function b(n){if(!n)return 1;var e,r=p.get(n);if(void 0!==r)return r;var t=n.useCallback.toString();if(n.useReducer===n.useEffect)e=1;else if(n.useEffect===n.useImperativeHandle)e=32;else if(/Invalid/.test(t))e=2;else if(/updateCallback/.test(t)||/\[0\]/.test(t)&&/\[1\]/.test(t)){var i=n.useReducer.toString();if(/rerenderReducer/.test(i)||/return\s*\[\w+,/.test(i))e=16;else e=8}else e=4;p.set(n,e);return e}var y=[],m=Symbol.for("react.element"),g=function(){};function x(n){if("function"!=typeof n)return n;else return function(r,t){if("string"==typeof r&&t)for(var i in t){var u=t[i];if("children"!==i&&u instanceof e.Signal)t[i]=u.value}return n.call.apply(n,[n,r,t].concat([].slice.call(arguments,2)))}}var h,j=Symbol.dispose||Symbol.for("Symbol.dispose");function S(n){if(h)h();h=n&&n.effect.S()}var q,_,k=function(){return S()},w=((q={effect:{s:void 0,c:function(){},S:function(){return g},d:function(){}},subscribe:function(){return g},getSnapshot:function(){return 0},f:function(){}})[j]=function(){},q),O=Promise.prototype.then.bind(Promise.resolve());function P(){k();if(!_)_=O(function(){_=void 0;k()});var n=r.useRef();if(null==n.current)n.current=function(){var n,r,t,i=0,u=e.effect(function(){r=this});r.c=function(){i=i+1|0;if(t)t()};return(n={effect:r,subscribe:function(n){t=n;return function(){i=i+1|0;t=void 0;u()}},getSnapshot:function(){return i},f:function(){k()}})[j]=function(){k()},n}();var i=n.current;t.useSyncExternalStore(i.subscribe,i.getSnapshot,i.getSnapshot);S(i);return i}Object.defineProperties(e.Signal.prototype,{$$typeof:{configurable:!0,value:m},type:{configurable:!0,value:function(n){var e=n.data,r=function(){if(a)return w;else return P()}();try{return e.value}finally{r.f()}}},props:{configurable:!0,get:function(){return{data:this}}},ref:{configurable:!0,value:null}});!function(){!function(){a=!0;Object.defineProperty(r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentDispatcher,"current",{get:function(){return d},set:function(n){if(!v){var e=b(d),r=b(n);d=n;if(function(n,e){if(1&n&&28&e)return!0;else if(2&n||2&e)return!1;else if(16&e)return!0;else return!1}(e,r)){v=!0;l=P();v=!1}else if(function(n,e){return Boolean(28&n&&1&e)}(e,r)){var t;null==(t=l)||t.f();l=null}}else d=n}})}();!function(){var n=c,e=s;o.createElement=x(o.createElement);e.jsx&&(e.jsx=x(e.jsx));n.jsx&&(n.jsx=x(n.jsx));e.jsxs&&(e.jsxs=x(e.jsxs));n.jsxs&&(n.jsxs=x(n.jsxs));e.jsxDEV&&(e.jsxDEV=x(e.jsxDEV));n.jsxDEV&&(n.jsxDEV=x(n.jsxDEV))}()}();n.Signal=e.Signal;n.batch=e.batch;n.computed=e.computed;n.effect=e.effect;n.signal=e.signal;n.untracked=e.untracked;n.useComputed=function(n){var t=r.useRef(n);t.current=n;return r.useMemo(function(){return e.computed(function(){return t.current()})},y)};n.useSignal=function(n){return r.useMemo(function(){return e.signal(n)},y)};n.useSignalEffect=function(n){var t=r.useRef(n);t.current=n;r.useEffect(function(){return e.effect(function(){return t.current()})},y)}});//# sourceMappingURL=signals.min.js.map
