import{Signal as n,signal as r,computed as e,effect as t}from"@preact/signals-core";export{Signal,batch,computed,effect,signal,untracked}from"@preact/signals-core";import i,{__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED as u,useMemo as f,useRef as o,useEffect as c}from"react";import{useSyncExternalStore as a}from"use-sync-external-store/shim/index.js";import l from"react/jsx-runtime";import s from"react/jsx-dev-runtime";var v=!1,m=null,p=!1,b=null,d=new Map;function g(n){if(!n)return 1;var r,e=d.get(n);if(void 0!==e)return e;var t=n.useCallback.toString();if(n.useReducer===n.useEffect)r=1;else if(n.useEffect===n.useImperativeHandle)r=32;else if(/Invalid/.test(t))r=2;else if(/updateCallback/.test(t)||/\[0\]/.test(t)&&/\[1\]/.test(t)){var i=n.useReducer.toString();if(/rerenderReducer/.test(i)||/return\s*\[\w+,/.test(i))r=16;else r=8}else r=4;d.set(n,r);return r}var y=[],h=Symbol.for("react.element"),S=function(){};function x(r){if("function"!=typeof r)return r;else return function(e,t){if("string"==typeof e&&t)for(var i in t){var u=t[i];if("children"!==i&&u instanceof n)t[i]=u.value}return r.call.apply(r,[r,e,t].concat([].slice.call(arguments,2)))}}var j,_=Symbol.dispose||Symbol.for("Symbol.dispose");function k(n){if(j)j();j=n&&n.effect.S()}var w,O,P=function(){return k()},$=((w={effect:{s:void 0,c:function(){},S:function(){return S},d:function(){}},subscribe:function(){return S},getSnapshot:function(){return 0},f:function(){}})[_]=function(){},w),B=Promise.prototype.then.bind(Promise.resolve());function C(){P();if(!O)O=B(function(){O=void 0;P()});var n=o();if(null==n.current)n.current=function(){var n,r,e,i=0,u=t(function(){r=this});r.c=function(){i=i+1|0;if(e)e()};return(n={effect:r,subscribe:function(n){e=n;return function(){i=i+1|0;e=void 0;u()}},getSnapshot:function(){return i},f:function(){P()}})[_]=function(){P()},n}();var r=n.current;a(r.subscribe,r.getSnapshot,r.getSnapshot);k(r);return r}Object.defineProperties(n.prototype,{$$typeof:{configurable:!0,value:h},type:{configurable:!0,value:function(n){var r=n.data,e=function(){if(v)return $;else return C()}();try{return r.value}finally{e.f()}}},props:{configurable:!0,get:function(){return{data:this}}},ref:{configurable:!0,value:null}});function useSignal(n){return f(function(){return r(n)},y)}function useComputed(n){var r=o(n);r.current=n;return f(function(){return e(function(){return r.current()})},y)}function useSignalEffect(n){var r=o(n);r.current=n;c(function(){return t(function(){return r.current()})},y)}!function(){!function(){v=!0;Object.defineProperty(u.ReactCurrentDispatcher,"current",{get:function(){return b},set:function(n){if(!p){var r=g(b),e=g(n);b=n;if(function(n,r){if(1&n&&28&r)return!0;else if(2&n||2&r)return!1;else if(16&r)return!0;else return!1}(r,e)){p=!0;m=C();p=!1}else if(function(n,r){return Boolean(28&n&&1&r)}(r,e)){var t;null==(t=m)||t.f();m=null}}else b=n}})}();!function(){var n=l,r=s;i.createElement=x(i.createElement);r.jsx&&(r.jsx=x(r.jsx));n.jsx&&(n.jsx=x(n.jsx));r.jsxs&&(r.jsxs=x(r.jsxs));n.jsxs&&(n.jsxs=x(n.jsxs));r.jsxDEV&&(r.jsxDEV=x(r.jsxDEV));n.jsxDEV&&(n.jsxDEV=x(n.jsxDEV))}()}();export{useComputed,useSignal,useSignalEffect};//# sourceMappingURL=signals.module.js.map
